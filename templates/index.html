<html>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <style>
        table, th, td {
          border: 1px solid black;
        }
        </style>

    <script>
        let addBook = ()=>{
            bookname = document.getElementById("bookname").value;
            author = document.getElementById("author").value;

            let xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("updatemessage").innerHTML = xhttp.responseText;
                    setTimeout(function(){ 
                        document.getElementById("updatemessage").innerHTML = "<br/>"; 
                    }, 1000);
                    getBook();
                }
            };
            xhttp.open("GET", "addBook/"+bookname+"/"+author, true);
            xhttp.send();
        }

        let getBook = ()=>{
            let xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    let books = JSON.parse(xhttp.responseText);
                    retstr = "<table class='table table-striped' style='width:100%;'><tr><th>Book</th><th>Author</th></tr>"
                    books.forEach(element => {
                        retstr+="<tr><td>"+element['bookname']+"</td><td>"+element['author']+"</td></tr>"
                    }); 
                    retstr+="</table>"

                    document.getElementById("listofbooks").innerHTML = retstr;
                }
            };
            xhttp.open("GET", "../getBooks", true);
            xhttp.send();
        }
    </script>
    <div class="card">
    <div class="card-body">
        <div class="mb-3">
            <label class="form-label">Book Name</label>
            <input type="text" class="form-control" id="bookname">
        </div>
    
        <div class="mb-3">
            <label class="form-label">Author</label>
            <input type="text" class="form-control" id="author">
        </div>
        <div>
        <button onclick="addBook()" class="btn btn-secondary">Add Book</button>
        </div>
    
        <div id="updatemessage"></div>
        <div id="listofbooks"></div>
        </div>
  </div>


    
</html>